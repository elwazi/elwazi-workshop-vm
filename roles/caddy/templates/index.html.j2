<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ilifu Training Resource</title>
    <meta name="description" content="ilifu cloud computing training portal ‚Äî access SSH, JupyterLab, and RStudio environments for data-intensive research.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- ‚îÄ‚îÄ Hero Header ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <header class="hero">
        <div class="hero-content">
            <a href="https://docs.ilifu.ac.za" title="ilifu Documentation">
                <img src="ilifu-logo.svg" alt="ilifu logo" class="hero-logo">
            </a>
            <h1>Welcome to this ilifu training resource</h1>
            <p>Your gateway to cloud computing for research</p>
        </div>
    </header>

    <!-- ‚îÄ‚îÄ Main Content ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <main class="container">

        <!-- About Section -->
        <section class="about">
            <div class="card">
                <p>
                    <strong>ilifu</strong> is a cloud computing facility supporting data-intensive
                    research in astronomy, bioinformatics, and related fields across South Africa.
                    This portal provides access to your training environment, including SSH terminals,
                    JupyterLab notebooks, and RStudio sessions. For comprehensive guides and
                    documentation, visit the
                    <a href="https://docs.ilifu.ac.za" target="_blank" rel="noopener">ilifu documentation site</a>.
                </p>

                <!-- Password Banner -->
                <div class="info-banner" role="alert">
                    <span class="icon" aria-hidden="true">üîë</span>
                    <span><strong>Need your password?</strong> Ask your course or workshop instructor for your login credentials.</span>
                </div>
            </div>
        </section>

        <!-- User Selector -->
        <section class="selector-section">
            <h2><span class="dot" aria-hidden="true"></span> Select your username</h2>
            <div class="card">
                <select id="user-select" class="user-select" aria-label="Select your username">
                    <option value="">‚Äî choose your username ‚Äî</option>
{% for server in groups["workshop_servers"] %}
{% for user in hostvars[server].workshop_users %}
                    <option value="{{ user.username }}">{{ user.username }}</option>
{% endfor %}
{% endfor %}
                </select>

                <div id="connection-details" class="connection-details">
                    <div class="conn-item">
                        <span class="conn-label">SSH Command</span>
                        <code id="ssh-cmd" class="conn-value" role="button" tabindex="0" aria-label="SSH command ‚Äî click to copy"></code>
                    </div>
{% if jupyter_install %}
                    <div class="conn-item">
                        <span class="conn-label">JupyterLab</span>
                        <code id="jupyter-url" class="conn-value" role="button" tabindex="0" aria-label="JupyterLab URL ‚Äî click to copy"></code>
                    </div>
{% endif %}
{% if rstudio_install %}
                    <div class="conn-item">
                        <span class="conn-label">RStudio</span>
                        <code id="rstudio-url" class="conn-value" role="button" tabindex="0" aria-label="RStudio URL ‚Äî click to copy"></code>
                    </div>
{% endif %}
                </div>
            </div>
        </section>

        <!-- Information Tabs -->
        <section class="tabs-section">
            <h2><span class="dot" aria-hidden="true"></span> Getting started</h2>
            <div class="card" style="padding: 0; overflow: hidden;">
                <nav class="tab-nav" role="tablist" aria-label="Getting started guides">
                    <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="panel-cli" id="tab-cli" data-tab="cli">
                        <span class="tab-icon" aria-hidden="true">‚å®Ô∏è</span>
                        <span class="tab-label">CLI / SSH</span>
                    </button>
{% if jupyter_install %}
                    <button class="tab-btn" role="tab" aria-selected="false" aria-controls="panel-jupyter" id="tab-jupyter" data-tab="jupyter">
                        <span class="tab-icon" aria-hidden="true">üìì</span>
                        <span class="tab-label">JupyterLab</span>
                    </button>
{% endif %}
{% if rstudio_install %}
                    <button class="tab-btn" role="tab" aria-selected="false" aria-controls="panel-rstudio" id="tab-rstudio" data-tab="rstudio">
                        <span class="tab-icon" aria-hidden="true">üìä</span>
                        <span class="tab-label">RStudio</span>
                    </button>
{% endif %}
                </nav>

                <!-- CLI / SSH Panel -->
                <div class="tab-panel active" role="tabpanel" id="panel-cli" aria-labelledby="tab-cli" style="padding: 1.5rem;">
                    <h3>Connecting via SSH</h3>
                    <p>Select your username above to get a personalised SSH command using a ProxyJump through <code>{{ domain_name }}</code>. Copy the command and paste it into your local terminal.</p>

                    <h3>Persistent sessions with tmux</h3>
                    <p>Use <kbd>tmux</kbd> to keep terminal sessions running even if you disconnect:</p>
                    <ul>
                        <li>Start a new session: <code>tmux new -s work</code></li>
                        <li>Detach from session: <kbd>Ctrl+b</kbd> then <kbd>d</kbd></li>
                        <li>Reattach to session: <code>tmux attach -t work</code></li>
                    </ul>

                    <h3>SSH key authentication</h3>
                    <p>Copy your SSH key to avoid typing your password each time. You need to do this in two steps:</p>
                    <ul>
                        <li>Copy key to the jump host: <code>ssh-copy-id <span class="dyn-user">username</span>@{{ domain_name }}</code></li>
                        <li>Copy key to the target server: <code>ssh-copy-id -J <span class="dyn-user">username</span>@{{ domain_name }} <span class="dyn-user">username</span>@<span class="dyn-server">server</span></code></li>
                    </ul>

                    <h3>Storage layout</h3>
                    <table>
                        <thead>
                            <tr><th>Path</th><th>Description</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>/users</code></td><td>Your home directory ‚Äî persistent across sessions</td></tr>
                            <tr><td><code>/data</code></td><td>Shared course/workshop datasets ‚Äî typically read-only</td></tr>
                            <tr><td><code>/scratch</code></td><td>Temporary working space ‚Äî may be cleaned periodically</td></tr>
                            <tr><td><code>/software</code></td><td>Shared software and tools</td></tr>
                        </tbody>
                    </table>
                </div>

{% if jupyter_install %}
                <!-- JupyterLab Panel -->
                <div class="tab-panel" role="tabpanel" id="panel-jupyter" aria-labelledby="tab-jupyter" style="padding: 1.5rem;">
                    <h3>Accessing JupyterLab</h3>
                    <p>Select your username above, then click the JupyterLab link to open it in a new tab. Log in with your workshop credentials (the same username and password).</p>

                    <h3>The JupyterLab interface</h3>
                    <p>JupyterLab is a browser-based interactive development environment. Key areas include:</p>
                    <ul>
                        <li><strong>File browser</strong> (left sidebar) ‚Äî navigate and manage your files</li>
                        <li><strong>Notebook area</strong> (centre) ‚Äî write and run code in cells</li>
                        <li><strong>Terminal</strong> ‚Äî open a terminal from the Launcher for command-line access</li>
                    </ul>

                    <h3>Working with notebooks</h3>
                    <ul>
                        <li>Run a cell: <kbd>Shift</kbd> + <kbd>Enter</kbd></li>
                        <li>Add a new cell: click the <strong>+</strong> button in the toolbar</li>
                        <li>Change cell type: use the dropdown to switch between <em>Code</em> and <em>Markdown</em></li>
                        <li>Save your work frequently with <kbd>Ctrl</kbd> + <kbd>s</kbd></li>
                    </ul>

                    <h3>Selecting a kernel</h3>
                    <p>When creating a new notebook, choose the appropriate kernel (e.g. Python 3). You can change kernels later via <strong>Kernel ‚Üí Change Kernel</strong> in the menu bar.</p>
                </div>
{% endif %}

{% if rstudio_install %}
                <!-- RStudio Panel -->
                <div class="tab-panel" role="tabpanel" id="panel-rstudio" aria-labelledby="tab-rstudio" style="padding: 1.5rem;">
                    <h3>Accessing RStudio</h3>
                    <p>Select your username above, then click the RStudio link to open the RStudio Server interface. Log in with your workshop credentials (the same username and password).</p>

                    <h3>The RStudio interface</h3>
                    <p>RStudio Server provides a full IDE in your browser with four main panes:</p>
                    <ul>
                        <li><strong>Source editor</strong> (top-left) ‚Äî write and edit R scripts</li>
                        <li><strong>Console</strong> (bottom-left) ‚Äî execute R commands interactively</li>
                        <li><strong>Environment / History</strong> (top-right) ‚Äî view variables and command history</li>
                        <li><strong>Files / Plots / Packages</strong> (bottom-right) ‚Äî manage files and view output</li>
                    </ul>

                    <h3>Installing packages</h3>
                    <p>Install R packages using the console:</p>
                    <p><code>install.packages("tidyverse")</code></p>
                    <p>Some packages may already be pre-installed. Check with <code>library(packagename)</code>.</p>

                    <h3>Working with data</h3>
                    <ul>
                        <li>Upload files using the <strong>Files</strong> pane ‚Üí <strong>Upload</strong> button</li>
                        <li>Access shared datasets from <code>/data</code></li>
                        <li>Save your scripts in <code>/users/yourname</code> to persist between sessions</li>
                    </ul>
                </div>
{% endif %}
            </div>
        </section>
    </main>

    <!-- ‚îÄ‚îÄ Footer ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <footer class="footer">
        <p class="footer-label">Supported by</p>
        <div class="footer-logos">
            <a href="https://www.idia.ac.za" target="_blank" rel="noopener" class="footer-logo" title="Inter-university Institute for Data Intensive Astronomy">
                <img src="idia-logo.png" alt="IDIA">
            </a>
            <span class="footer-divider" aria-hidden="true"></span>
            <a href="https://www.cbio.uct.ac.za" target="_blank" rel="noopener" class="footer-logo" title="Computational Biology Group">
                <img src="cbio-logo.png" alt="CBIO">
            </a>
            <span class="footer-divider" aria-hidden="true"></span>
            <a href="https://www.uct.ac.za" target="_blank" rel="noopener" class="footer-logo" title="University of Cape Town">
                <img src="uct-logo.svg" alt="UCT">
            </a>
        </div>
        <p class="footer-copy">¬© 2026 ilifu ‚Äî Cloud computing for data-intensive research</p>
    </footer>

    <!-- ‚îÄ‚îÄ JavaScript ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->
    <script src="main.js"></script>
</body>
</html>
